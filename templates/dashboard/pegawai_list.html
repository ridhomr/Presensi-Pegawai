{% extends 'dashboard/base.html' %}
{% load static %}

{% block css %}
    <link href="{% static 'plugins/datatables/dataTables.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'plugins/datatables/jquery.dataTables.min.css' %}" rel="stylesheet">
    <link href="{% static 'plugins/datatables/buttons.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'plugins/datatables/select.dataTables.min.css' %}" rel="stylesheet">
    <link href="{% static 'plugins/sweetalert/sweetalert.css' %}" rel="stylesheet">
    <link href="{% static 'css/sweetalert.min.css' %}" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
{% endblock %}


{% block content %}
<div class="content-wrapper">
        <section class="content-header">
            <h1>
                Pegawai
                <small>Master</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"></a></li>
                <li class="active"><i class="fa fa-dashboard"></i><a href="{% url 'dashboard' %}">&nbsp;Home</a></li>
                <li class="active">Pegawai</li>
            </ol>
        </section>
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div class="alert-place">

                    </div>
                    <div class="box box-primary">
                        <div class="box-header">
                            <h3 class="box-title">Data Pegawai</h3>

                            <div class="pull-right box-tools">
                                <span data-toggle="tooltip"
                                      title="Tambah Pegawai"
                                      data-original-title="Tambah Pegawai">
                                      <br>
                                    <a href="{% url 'pegawai_form' %}" class="btn btn btn-light btn-lg add-pegawai"><span style="color: #000; font-size: 15px;"> <img style="width:20px;height:auto;" src="{% static 'img/add_pegawai5.png' %}"> &nbsp;<b>Tambah</b>&nbsp; </span></a>
                                </span>
                            </div>
                        </div>
                    <br>

						<div class="box-body" style="font-size: 14px;">
							<table id="example" class="table table-striped table-bordered" style="width:100%">
								<thead  class="text-bold">
									<tr>
                                        <td>ID</td>
										<td>Nip</td>
										<td>Nama</td>
										<td>Tgl Lahir</td>
										<td>Alamat</td>
										<td>JK</td>
										<td>No.Hp</td>
										<td>Jabatan</td>
                                        <td>Action</td>
									</tr>
								</thead>
								<tbody>
									{% for pwg in daftar_pegawai %}
									<tr>
                                        <td>{{pwg.id}}</td>
										<td>{{pwg.nip}}</td>
										<td>{{pwg.nama}}</td>
										<td>{{pwg.tgl_lahir}}</td>
										<td>{{pwg.alamat}}</td>
										<td>{{pwg.jenis_kelamin}}</td>
										<td>{{pwg.no_hp}}</td>
										<td>{{pwg.jabatan}}</td>
                                        <td>                           

                                <a style="border:none;background-color:transparent;"> 
                                                             
                                

                                
                                <a style="border:none;background-color:transparent;">                                
                                <a href="{% url 'ubah_pegawai' pwg.id %}" class="btn btn-success btn-lg"><i class="fa fa-pencil-square-o"></i> Edited</a><p>

                                            
                                <a style="border:none;background-color:transparent;">
                                <!-- <a href="{% url 'hapus_pegawai' pwg.id %}" onclick="return confirm('apakah anda yakin ingin menghapus {{ pwg.nama }} ini??')"><img style="width:20px;height:auto;" src="{% static 'img/delete.png' %}"></a> -->
                                <form action="{% url 'hapus_pegawai' pwg.id %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="pwg.id" id="pwg.id" value="pwg.id">
                                    <button href="{% url 'hapus_pegawai' pwg.id %}" class="btn btn-danger btn-lg" name="archive" type="submit" onclick="archiveFunction()">
                                        <i class="fa fa-archive"></i>
                                            Delete
                                    </button>
                                </form>
                           
                                <script>
                                    function archiveFunction() {
                                        event.preventDefault(); // prevent form submit
                                        var form = event.target.form; // storing the form
                                                swal({
                                          title: "Apakah anda yakin ingin menghapus?",
                                          text: "Tetapi Anda tidak dapat mengambil file ini lagi.",
                                          type: "warning",
                                          showCancelButton: true,
                                          confirmButtonColor: "#DD6B55",
                                          confirmButtonText: "Yes, archive it!",
                                          cancelButtonText: "No, cancel please!",
                                          closeOnConfirm: false,
                                          closeOnCancel: false
                                        },
                                        function(isConfirm){
                                          if (isConfirm) {
                                            form.submit();          // submitting the form when user press yes
                                          } else {
                                            swal("Batalkan", "File Presensi Anda aman :)", "error");
                                          }
                                        });
                                        }
                                </script>





                                        </td>
									</tr>
									{% endfor %}
								</tbody>
                                <tfoot>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nip</th>
                                        <th>Nama</th>
                                        <th>Tgl</th>
                                        <th>Alamat</th>
                                        <th>JK</th>
                                        <th>No.Hp</th>
                                        <th>Jabatan</th>
                                        <th>Action</th>
                                    </tr>
                                </tfoot>
							</table>

                            
						</div>
					</div>
                </div>
            </div>
        </section>
    </div>


{% endblock content %}

{% block js %}
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{% static 'js/sweetalert.min.js' %}"></script>
    <script src="{% static 'plugins/sweetalert/sweetalert.min.js' %}"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        {% for msg in messages %}
            Swal.fire({
              position: 'center',
              text: ('{{ msg }}'),
              icon: 'success',
              title: 'Data Pegawai Berhasil Di Update',
              showConfirmButton: false,
            })
        {% endfor %}
    </script>

    <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#example').DataTable( {
                dom: 'Bfrtip',

                buttons: [
                    { extend: 'copy', className:'btn btn btn-info btn-lg btn-rounded', text: '<i class="glyphicon glyphicon-copy" aria-hidden="true"> CLIPBOARD</i>' },
                    
                    { extend: 'print', className:'btn btn-info btn-lg btn-rounded', messageTop:'Informasi dalam tabel ini adalah hak cipta Diskominfo Kab.Mempawah', text: '<i class="glyphicon glyphicon-print" aria-hidden="true"> CETAK</i>' },

                    { extend: 'pdf', className:'btn btn-info btn-lg btn-rounded', messageTop:'Informasi dalam tabel ini adalah hak cipta Diskominfo Kab.Mempawah', text: '<i class="glyphicon glyphicon-file" aria-hidden="true">.Export_PDF</i>' },

                    { extend: 'csv', className:'btn btn-info btn-lg btn-rounded', text: '<i class="glyphicon glyphicon-list-alt">.Export_Excel</i>'},
                ]
            } );
        } );
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
<!--     <script>

        function hapus_pegawai(id){
            Swal.fire({
                title: 'Are you sure?',
                text: ('{{ pwg.id }}'),
                icon: 'warning',
                showCancelButton: true,
                reverseButtons: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!',
                timePicker: 40000,
            })
            .then(function(result) {
                if(result.isConfirmed){
                    window.location.href = "/dashboard/pegawai/list/"
                }
            })
        }
    </script> -->
{% endblock %}